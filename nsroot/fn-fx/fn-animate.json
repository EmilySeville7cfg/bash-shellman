{
  "prefix": "fn animation animate",
  "body": [
  "# Usage: animate framesArray interval",
  "function animate () {",
  "\tlocal frames=(\"\\$@\")",
  "",
  "\t((lastIndex=\\${#frames[@]} - 1))",
  "\tlocal mode=\\${frames[lastIndex]}",
  "\tunset frames[lastIndex]",
  "",
  "\t((lastIndex=\\${#frames[@]} - 1))",
  "\tlocal interval=\\${frames[lastIndex]}",
  "\tunset frames[lastIndex]",
  "",
  "\t# Comment out next two lines if you are using CTRL+C event handler.",
  "${1:\ttrap 'tput cnorm; echo' EXIT\n\ttrap 'exit 127' HUP INT TERM}\n",
  "\ttput civis # hide cursor",
  "\ttput sc # save cursor position",
  "",
  "\ttput civis # hide cursor",
  "\ttput sc # save cursor position",
  "",
  "\tindex=0",
  "\tmax=\"\\${#frames[@]}\"",
  "\tindices=()",
  "\tdirection=\"forward\"",
  "\tforwardIndices=( \\$(seq 0 1 \"\\${max}\") )",
  "\tbackwardIndices=( \\$(seq \"\\${max}\" -1 0) )",
  "",
  "\twhile true; do",
  "\t\tif [ \"\\${mode}\" = \"circular\" ]; then",
  "\t\t\tdirection=\"forward\"",
  "\t\telif [ \"\\${mode}\" = \"pendular\" ]; then",
  "\t\t\tif (( index >= max )); then",
  "\t\t\t\tdirection=\"backward\"",
  "\t\t\telif (( index <= 0 )); then",
  "\t\t\t\tdirection=\"forward\"",
  "\t\t\tfi",
  "\t\telse",
  "\t\t\techo \"Wrong mode! Valid modes: circular, pendular\"",
  "\t\t\texit 255",
  "\t\tfi",
  "",
  "\t\tif [ \"\\${direction}\" = \"forward\" ]; then",
  "\t\t\tindices=( \"\\${forwardIndices[@]}\" )",
  "\t\telse",
  "\t\t\tindices=( \"\\${backwardIndices[@]}\" )",
  "\t\tfi",
  "\t\t",
  "",
  "\t\tfor index in \"\\${indices[@]}\"; do",
  "\t\t\ttput rc # restore cursor position",
  "\t\t\techo \"\\${frames[\\$index]}\"",
  "\t\t\tsleep \"\\${interval}\"",
  "\t\tdone",
  "\tdone",
  "}\n"
  ],
  "description": "animate frames of animation with interval seconds between frames circular and pendular"
}